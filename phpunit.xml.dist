<?xml version="1.0" encoding="utf-8"?>
<phpunit 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="https://schema.phpunit.de/9.5/phpunit.xsd"
    bootstrap="tests/bootstrap.php" 
    colors="true" 
    testdox="true">
    <testsuites>
        <!-- Run all tests (excluding integration tests by default) -->
        <testsuite name="All">
            <directory>./tests</directory>
            <exclude>./tests/Http/HttpTest.php</exclude>
        </testsuite>
        
        <!-- Feature-specific test suites -->
        <testsuite name="AI">
            <directory>./tests/AI</directory>
        </testsuite>
        <testsuite name="Audit">
            <directory>./tests/Audit</directory>
        </testsuite>
        <testsuite name="Auth">
            <directory>./tests/Auth</directory>
        </testsuite>
        <testsuite name="Cable">
            <directory>./tests/Cable</directory>
        </testsuite>
        <testsuite name="Cache">
            <directory>./tests/Cache</directory>
        </testsuite>
        <testsuite name="Captcha">
            <directory>./tests/Captcha</directory>
        </testsuite>
        <testsuite name="Config">
            <directory>./tests/Config</directory>
        </testsuite>
        <testsuite name="Console">
            <directory>./tests/Console</directory>
        </testsuite>
        <testsuite name="Container">
            <directory>./tests/Container</directory>
        </testsuite>
        <testsuite name="Database">
            <directory>./tests/Database</directory>
        </testsuite>
        <testsuite name="Event">
            <directory>./tests/Event</directory>
        </testsuite>
        <testsuite name="Factory">
            <directory>./tests/Factory</directory>
        </testsuite>
        <testsuite name="Faker">
            <directory>./tests/Faker</directory>
        </testsuite>
        <testsuite name="File">
            <directory>./tests/File</directory>
        </testsuite>
        <testsuite name="Filters">
            <directory>./tests/Filters</directory>
        </testsuite>
        <testsuite name="Http">
            <directory>./tests/Http</directory>
        </testsuite>
        <testsuite name="Jobs">
            <directory>./tests/Jobs</directory>
        </testsuite>
        <testsuite name="Logger">
            <directory>./tests/Logger</directory>
        </testsuite>
        <testsuite name="Mail">
            <directory>./tests/Mail</directory>
        </testsuite>
        <testsuite name="Mfa">
            <directory>./tests/Mfa</directory>
        </testsuite>
        <testsuite name="Integration">
            <directory>./tests/Integration</directory>
        </testsuite>
        <testsuite name="Testing">
            <directory>./tests/Testing</directory>
        </testsuite>
        <testsuite name="Pdf">
            <directory>./tests/Pdf</directory>
        </testsuite>
        <testsuite name="Rbac">
            <directory>./tests/Rbac</directory>
        </testsuite>
        <testsuite name="Redis">
            <directory>./tests/Redis</directory>
        </testsuite>
        <testsuite name="Routing">
            <directory>./tests/Routing</directory>
        </testsuite>
        <testsuite name="Schedule">
            <directory>./tests/Schedule</directory>
        </testsuite>
        <testsuite name="Secrets">
            <directory>./tests/Secrets</directory>
        </testsuite>
        <testsuite name="Session">
            <directory>./tests/Session</directory>
        </testsuite>
        <testsuite name="Settings">
            <directory>./tests/Settings</directory>
        </testsuite>
        <testsuite name="SocialAuth">
            <directory>./tests/SocialAuth</directory>
        </testsuite>
        <testsuite name="Storage">
            <directory>./tests/Storage</directory>
        </testsuite>
        <testsuite name="Tags">
            <directory>./tests/Tags</directory>
        </testsuite>
        <testsuite name="Taxonomies">
            <directory>./tests/Taxonomies</directory>
        </testsuite>
        <testsuite name="Uploads">
            <directory>./tests/Uploads</directory>
        </testsuite>
        <testsuite name="Utils">
            <directory>./tests/Utils</directory>
        </testsuite>
        <testsuite name="Validation">
            <directory>./tests/Validation</directory>
        </testsuite>
        <testsuite name="View">
            <directory>./tests/View</directory>
        </testsuite>
        <testsuite name="Webhook">
            <directory>./tests/Webhook</directory>
        </testsuite>
    </testsuites>
    <php>
        <!-- MySQL Test Config -->
        <env name="MYSQL_HOST" value="localhost" />
        <env name="MYSQL_PORT" value="3306" />
        <env name="MYSQL_USER" value="root" />
        <env name="MYSQL_PASSWORD" value="root" />
        <env name="MYSQL_DB" value="test_lightpack" />
        
        <!-- AWS S3 Test Config (for S3StorageIntegrationTest) -->
        <env name="AWS_ACCESS_KEY" value="" />
        <env name="AWS_SECRET_KEY" value="" />
        <env name="AWS_BUCKET" value="" />
        <env name="AWS_REGION" value="us-east-1" />
        
        <!-- Mailtrap Test Config (for SMTP Integration Tests) -->
        <!-- Get credentials from: https://mailtrap.io -->
        <env name="MAILTRAP_HOST" value="" />
        <env name="MAILTRAP_PORT" value="" />
        <env name="MAILTRAP_USERNAME" value="" />
        <env name="MAILTRAP_PASSWORD" value="" />
        
        <!-- Resend Test Config (for Resend Integration Tests) -->
        <!-- Get API key from: https://resend.com (free tier: 100 emails/day) -->
        <!-- Tests use Resend's test emails: onboarding@resend.dev, delivered@resend.dev -->
        <env name="RESEND_API_KEY" value="" />
    </php>
    <coverage>
        <include>
            <directory suffix=".php">./src/Framework</directory>
        </include>
    </coverage>
</phpunit>